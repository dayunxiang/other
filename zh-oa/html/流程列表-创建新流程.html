<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="google" value="notranslate">
        <title>流程列表-创建新流程</title>
        <link href="../widget/iconfont/iconfont.css" rel="stylesheet">
        <link href="../css/allPage.min.css" rel="stylesheet">
    </head>

    <body class="page-create-process">
        <div class="p-tab-card">
            <div class="nav-wrap">
                <a class="tab-nav active" href="javascript:;">基本信息</a>
                <a class="tab-nav" href="javascript:;">表单模型</a>
                <a class="tab-nav" href="javascript:;">表单设计</a>
                <a class="tab-nav" href="javascript:;">流程设计</a>
            </div>

            <div class="con-wrap">
                <div class="tab-con active">
                    <div class="form-list">
                        <div class="form-item">
                            <div class="attr">
                                <p class="attr-text">模型名称:</p>
                            </div>

                            <div class="content">
                                <div class="input-item">
                                    <input type="text">
                                </div>
                            </div>
                        </div>

                        <div class="form-item">
                            <div class="attr">
                                <p class="attr-text">模型key:</p>
                            </div>

                            <div class="content">
                                <div class="input-item">
                                    <input type="text">
                                </div>
                            </div>
                        </div>

                        <div class="form-item">
                            <div class="attr">
                                <p class="attr-text">描述:</p>
                            </div>

                            <div class="content">
                                <div class="textarea-item">
                                    <textarea rows="4"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="form-item">
                            <div class="attr">
                                <p class="attr-text">业务类型:</p>
                            </div>

                            <div class="content">
                                <div class="select-item">
                                    <select>
                                        <option value="1">哈哈</option>
                                        <option value="1">哈哈</option>
                                        <option value="1">哈哈</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="form-item">
                            <div class="attr">
                                <p class="attr-text">表单:</p>
                            </div>

                            <div class="content">
                                <div style="display: inline-block; width: 50%;" class="input-item">
                                    <input type="text">
                                </div>

                                <button id="choiceForm" class="btn-choice">
                                    <i class="icon">&#xe60a;</i>
                                    <span>选择已有表单</span>
                                </button>
                            </div>
                        </div>

                        <div class="form-item">
                            <div class="attr">
                                <p class="attr-text">&nbsp;</p>
                            </div>

                            <div class="content">
                                <button class="btn-edit">保存</button>
                                <button class="btn-edit">下一步</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tab-con form-model">
                    <div class="wrap">
                        <div class="main-content">
                            <div class="form-list">
                                <div class="form-item">
                                    <div class="attr">
                                        <p class="attr-text">表名称:</p>
                                    </div>

                                    <div class="content">
                                        <div class="select-item">
                                            <select>
                                                <option value="1">哈哈</option>
                                                <option value="1">哈哈</option>
                                                <option value="1">哈哈</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-item">
                                    <div class="attr">
                                        <p class="attr-text">表中文名:</p>
                                    </div>

                                    <div class="content">
                                        <div class="input-item">
                                            <input type="text">
                                        </div>
                                    </div>
                                </div>

                                <button class="btn-add-row">添加行</button>
                            </div>

                            <table id="formModelTable" class="p-tab-theme-1">
                                <thead>
                                    <tr>
                                        <th>序号</th>
                                        <th>字段名称</th>
                                        <th>字段别名</th>
                                        <th>字段类型</th>
                                        <th>默认值</th>
                                        <th>长度</th>
                                        <th>是否可空</th>
                                        <th>是否主键</th>
                                        <th>是否递增</th>
                                        <th>小数位</th>
                                        <th>删除</th>
                                    </tr>
                                </thead>

                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <select>
                                                <option value="1">int</option>
                                                <option value="1">string</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>可空</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>主键</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>递增</span>
                                            </label>
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <button>
                                                <i>&#xe6b8;</i>
                                                <span>删除</span>
                                            </button>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>1</td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <select>
                                                <option value="1">int</option>
                                                <option value="1">string</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>可空</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>主键</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>递增</span>
                                            </label>
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <button>
                                                <i>&#xe6b8;</i>
                                                <span>删除</span>
                                            </button>
                                        </td>
                                    </tr>

                                    <tr>
                                        <td>1</td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <select>
                                                <option value="1">int</option>
                                                <option value="1">string</option>
                                            </select>
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>可空</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>主键</span>
                                            </label>
                                        </td>
                                        <td>
                                            <label>
                                                <input type="checkbox">
                                                <span>递增</span>
                                            </label>
                                        </td>
                                        <td>
                                            <input type="text">
                                        </td>
                                        <td>
                                            <button>
                                                <i>&#xe6b8;</i>
                                                <span>删除</span>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="aside-content">
                            <dl>
                                <dt>
                                    模型列表
                                </dt>

                                <dd>
                                    <p>用户管理</p>
                                    <button>编辑</button>
                                </dd>

                                <dd>
                                    <p>用户权限关系管理</p>
                                    <button>编辑</button>
                                </dd>
                            </dl>

                            <button class="btn-add">
                                <i class="icon">&#xe642;</i>
                                <p>子表添加</p>
                            </button>
                        </div>
                    </div>

                    <div class="tools">
                        <button>上一步</button>
                        <button>模型保存</button>
                        <button>下一步</button>
                    </div>
                </div>

                <div class="tab-con">3</div>

                <div class="tab-con">4</div>
            </div>
        </div>

        <template id="choiceFormDialog">
            <div class="choice-form-dialog">
                <div class="search-wrap">
                    <div class="attr">
                        <p class="attr-text">搜索表单:</p>
                    </div>

                    <div class="content">
                        <div class="input-item">
                            <input type="text">
                        </div>
                    </div>
                </div>

                <div id="formTree"></div>
            </div>
        </template>

        <script src="../widget/jquery-1.8.3/jquery.js"></script>
        <script src="../widget/layer-v3.1.1/layer.js"></script>
        <script src="../scripts/tab.js"></script>
        <script src="../widget/jsTree/dist/jstree.js"></script>
        <link href="../widget/jsTree/dist/themes/default/style.css" rel="stylesheet">
        <link href="../widget/datatables-1.10.13/css/jquery.dataTables.default.css" rel="stylesheet">
        <script src="../widget/datatables-1.10.13/js/jquery.dataTables.js"></script>
        <script>
            $(function() {
                // 启用选项卡脚本
                $('.p-tab-card').tab();

                // 表格插件
                $.extend($.fn.dataTable.defaults, {
                    searching: false,
                    ordering: false,
                    'dom': 'rtilp',
                    'language': {
                        "url": "../widget/datatables-1.10.13/js/Chinese.json"
                    }
                });
                $('#formModelTable').DataTable();

                $('#choiceForm').on('click', function() {
                    // 弹窗
                    layer.open({
                        zIndex: 2,
                        type: 1,
                        area: ['400px', ''],
                        shadeClose: true, //点击遮罩关闭
                        title: '选择表单',
                        content: $('#choiceFormDialog').html(),
                        btn: ['确定', '取消'],
                        btnAlign: 'c',
                        success: function (layero, index) {
                            // 插件官网 https://www.jstree.com/
                            // 别人使用的例子： https://mrbird.cc/%E6%A0%91%E5%BD%A2%E6%8F%92%E4%BB%B6jsTree.html
                            $('#formTree').jstree({
                                "plugins": ["checkbox"],
                                'core': {
                                    'data': [
                                        {
                                            "text": "加班申请",
                                            "state": {
                                                "opened": true
                                            },
                                            "children": [
                                                {
                                                    "text": "请假申请",
                                                    "state": {
                                                        "selected": true
                                                    },
                                                    "icon": "glyphicon glyphicon-flash"
                                                },
                                                {
                                                    "text": "年度评优优选",
                                                    "state": {
                                                        "disabled": true
                                                    }
                                                },
                                                {
                                                    "text": "转岗申请",
                                                    "state": {
                                                        "selected": false
                                                    },
                                                },
                                            ]
                                        },
                                        {
                                            "text": "出国申请",
                                            "state": {
                                                "opened": false
                                            },
                                            "children": [
                                                {
                                                    "text": "辞职申请",
                                                    "state": {
                                                        "selected": false // 选择了true, opened：false会失效哈
                                                    },
                                                },
                                                {
                                                    "text": "转正申请",
                                                    "state": {
                                                        "disabled": false
                                                    }
                                                },
                                                {
                                                    "text": "调薪申请",
                                                    "state": {
                                                        "selected": false
                                                    },
                                                },
                                            ]
                                        },
                                    ]
                                }
                            });
                        }
                    });
                });
            });
        </script>
    </body>
</html>
